<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ğŸ‰ MatemÃ¡tica SÃºper Divertida ğŸ‰</title>
<style>
body{
    font-family:'Arial',sans-serif;
    background:linear-gradient(135deg,#76b852,#8DC26F);
    text-align:center;
    padding-top:60px; /* espacio para barra fija */
    color:#333;
    background-image: url(https://www.educapeques.com/wp-content/uploads/2017/02/matem%C3%A1ticas.jpg.webp);
    background-size: cover;
    background-position: center;
}
.screen{display:none}
.active{display:block}
.card{
    background:white;
    padding:25px 30px;
    margin:20px auto;
    max-width:500px;
    border-radius:20px;
    box-shadow:0 12px 25px rgba(0,0,0,.25);
}
button{
    padding:18px 36px;
    border:none;
    border-radius:18px;
    font-size:20px;
    font-weight:700;
    cursor:pointer;
    margin:12px;
    background:#4facfe;
    color:white;
}
button:hover{transform:scale(1.05);}
.nivel-bajo{background:#2ecc71;}
.nivel-medio{background:#f39c12;}
.nivel-alto{background:#e74c3c;}
input{
    padding:14px; font-size:20px; width:100px;
    border-radius:12px; border:2px solid #ccc; text-align:center;
}
.correct{color:#27ae60;font-weight:bold;}
.incorrect{color:#e74c3c;font-weight:bold;}
h1{font-size:40px;color:#8DC26F;}
h2{font-size:28px;color:#8DC26F;}

/* Barra fija de puntaje */
#barraPuntaje {
    position:fixed;
    top:0;
    left:0;
    right:0;
    background:rgba(0,0,0,0.6);
    color:#fff;
    font-size:22px;
    padding:10px;
    z-index:999;
    font-weight:bold;
}
</style>
</head>
<body>

<h1>ğŸ“š MatemÃ¡tica SÃºper Divertida ğŸ‰</h1>

<div id="tipos" class="screen active">
    <h2> Selecciona tu aventura ğŸ¹</h2>
    <button onclick="seleccionarTipo('suma')">â• Sumas</button>
    <button onclick="seleccionarTipo('resta')">â– Restas</button>
    <button onclick="seleccionarTipo('multi')">âœ– MultiplicaciÃ³n</button>
    <button onclick="seleccionarTipo('division')">â— DivisiÃ³n</button>
    <button onclick="seleccionarTipo('secuencia')">ğŸ”¢ Secuencias</button>
    <button onclick="seleccionarTipo('analogia')">ğŸ§  AnalogÃ­as</button>
</div>

<div id="niveles" class="screen">
    <h2>Escoge tu nivel de aventura ğŸ¹</h2>
    <button class="nivel-bajo" onclick="iniciarNivel('facil')">FÃ¡cil</button>
    <button class="nivel-medio" onclick="iniciarNivel('medio')">Intermedio</button>
    <button class="nivel-alto" onclick="iniciarNivel('dificil')">Avanzado</button>
    <br><button onclick="backToTipos()">â¬… Regresar</button>
</div>

<div id="ejercicios" class="screen"></div>
<div id="resultado" class="screen"></div>

<script>
let tipoActual="", nivelActual="", ejerciciosActuales=[], puntaje=0;

// AnalogÃ­as por nivel
const analogiasFacil = [
    ["Sol ğŸŒ es de dÃ­a como luna ğŸŒ™ es de ___","noche"],
    ["Perro ğŸ¶ es cachorro como gato ğŸ± es ___","gatito"],
    ["PÃ¡jaro ğŸ¦ vuela como pez ğŸŸ ___","nada"],
    ["Vaca ğŸ„ da leche como gallina ğŸ” da ___","huevo"],
    ["Zapato ğŸ‘Ÿ va en pie como gorra ğŸ§¢ va en ___","cabeza"],
    ["Manzana ğŸ es roja como plÃ¡tano ğŸŒ es ___","amarillo"],
    ["DÃ­a ğŸŒ es claro como noche ğŸŒ™ es ___","oscura"],
    ["Agua ğŸ’§ es lÃ­quida como hielo â„ es ___","sÃ³lido"],
    ["Flor ğŸŒ¸ crece en tierra como pez ğŸ  en ___","agua"],
    ["Gato ğŸ± es animal como pÃ¡jaro ğŸ¦ es ___","ave"]
];
const analogiasMedio = [
    ["Libro ğŸ“˜ sirve para leer como lÃ¡piz âœ sirve para ___","escribir"],
    ["Pan ğŸ viene del trigo ğŸŒ¾ como leche ğŸ¥› viene de ___","vaca"],
    ["MontaÃ±a ğŸ”ï¸ es alta como valle ğŸï¸ es ___","bajo"],
    ["RÃ­o ğŸï¸ lleva agua como carretera ğŸš— lleva ___","autos"],
    ["Sombrero ğŸ© va en cabeza como guante ğŸ§¤ va en ___","mano"],
    ["Sol ğŸŒ da luz como fuego ğŸ”¥ da ___","calor"],
    ["Mapa ğŸ—ºï¸ muestra lugares como reloj â° muestra ___","tiempo"],
    ["CorazÃ³n â¤ï¸ late como pulmÃ³n ğŸŒ¬ï¸ ___","respira"],
    ["Llave ğŸ” abre puerta ğŸšª como contraseÃ±a ğŸ§  abre ___","cuenta"],
    ["Ojo ğŸ‘ï¸ ve colores como oÃ­do ğŸ‘‚ ___ sonidos","escucha"]
];
const analogiasDificil = [
    ["Estrella â­ brilla en noche como sol ğŸŒ brilla en ___","dÃ­a"],
    ["CÃ³digo ğŸ’» sirve para programa como receta ğŸ² sirve para ___","comida"],
    ["Semilla ğŸŒ± se convierte en planta como larva ğŸ› en ___","mariposa"],
    ["Ã“rbita ğŸŒ rodea sol â˜€ï¸ como luna ğŸŒ™ rodea ___","tierra"],
    ["EnergÃ­a âš¡ se transforma como agua ğŸ’§ se ___","congela"],
    ["Palabra ğŸ—£ï¸ construye frase como nota ğŸµ construye ___","melodÃ­a"],
    ["Historia ğŸ“– tiene inicio como cuento ğŸ§šâ€â™‚ï¸ tiene ___","final"],
    ["Planeta ğŸŒ gira como rueda ğŸš— ___","rota"],
    ["Circuito ğŸ”Œ cierra corriente como sistema ğŸ’» cierra ___","programa"],
    ["Ãtomo âš›ï¸ es parte de elemento como cÃ©lula ğŸ§¬ es parte de ___","organismo"]
];

// Mezcla un arreglo
function shuffle(arr){
    let c=[...arr];
    for(let i=c.length-1;i>0;i--){
        let j=Math.floor(Math.random()*(i+1));
        [c[i],c[j]]=[c[j],c[i]];
    }
    return c;
}

// Genera ejercicios aleatorios
function generarEjercicios(){
    ejerciciosActuales = [];

    if(tipoActual === 'analogia'){
        let lista = [];
        if(nivelActual === 'facil') lista = analogiasFacil;
        if(nivelActual === 'medio') lista = analogiasMedio;
        if(nivelActual === 'dificil') lista = analogiasDificil;
        ejerciciosActuales = shuffle(lista).slice(0,10);
        return;
    }

    for(let i=0;i<10;i++){
        let a,b,expr,res;
        if(tipoActual==='suma'){
            let range = nivelActual==='facil'?[1,10]:nivelActual==='medio'?[10,25]:[20,50];
            a=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            b=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            expr=`${a} ğŸ + ${b} ğŸ`; res=a+b;
        }
        if(tipoActual==='resta'){
            let range = nivelActual==='facil'?[1,10]:nivelActual==='medio'?[10,25]:[20,50];
            a=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            b=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            if(b>a)[a,b]=[b,a];
            expr=`${a} ğŸ¬ - ${b} ğŸ¬`; res=a-b;
        }
        if(tipoActual==='multi'){
            let range = nivelActual==='facil'?[1,5]:nivelActual==='medio'?[2,8]:[5,12];
            a=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            b=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            expr=`${a} ğŸª Ã— ${b} ğŸª`; res=a*b;
        }
        if(tipoActual==='division'){
            let range = nivelActual==='facil'?[1,5]:nivelActual==='medio'?[2,10]:[5,15];
            b=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            res=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];
            a=b*res;
            expr=`${a} ğŸ« Ã· ${b} ğŸ«`;
        }
        if(tipoActual==='secuencia'){
            let start=Math.floor(Math.random()*10)+1;
            let step=(nivelActual==='facil'?1:(nivelActual==='medio'?2:(Math.floor(Math.random()*3)+2)));
            expr=`${start} ğŸ”¢ - ${start+step} ğŸ”¢ - ${start+2*step} ğŸ”¢ - ___`; res=start+3*step;
        }
        ejerciciosActuales.push([expr,res]);
    }
}

function seleccionarTipo(t){ tipoActual=t; show('niveles'); }

function iniciarNivel(n){
    nivelActual=n;
    puntaje=0;
    generarEjercicios();
    mostrarEjercicios();
}

// Mostrar ejercicios con PUNTAJE FIJO ARRIBA
function mostrarEjercicios(){
    let html = `<div id="barraPuntaje">Puntaje: ${puntaje} / 10</div>`;
    ejerciciosActuales.forEach((e,i)=>{
        html+=`
        <div class="card">
            <h3>${e[0]}</h3>
            <input id="r${i}" oninput="actualizarPuntaje()">
            <p id="m${i}"></p>
        </div>`;
    });
    html+=`<button onclick="finalizar()">Finalizar</button><button onclick="show('niveles')">â¬… Regresar</button>`;
    document.getElementById('ejercicios').innerHTML=html;
    show('ejercicios');
}

// Actualizar puntaje en tiempo real
function actualizarPuntaje(){
    puntaje=0;
    ejerciciosActuales.forEach((e,i)=>{
        let val=document.getElementById('r'+i).value.trim().toLowerCase();
        let ok=e[1].toString().toLowerCase();
        let p=document.getElementById('m'+i);
        if(val===ok){
            puntaje++;
            p.innerHTML="âœ” Correcto"; p.className="correct";
        } else if(val.length>0){
            p.innerHTML="âŒ Incorrecto"; p.className="incorrect";
        } else p.innerHTML="";
    });
    document.getElementById('barraPuntaje').innerText = `Puntaje: ${puntaje} / 10`;
}

function finalizar(){
    let medalla="ğŸ¥‰";
    if(puntaje>=8) medalla="ğŸ¥‡";
    else if(puntaje>=5) medalla="ğŸ¥ˆ";
    document.getElementById('resultado').innerHTML =
    `<div class="card">
        <h2>Puntaje final: ${puntaje} / 10</h2>
        <h1>${medalla}</h1>
        <button onclick="show('niveles')">Volver a niveles</button>
    </div>`;
    show('resultado');
}

function show(id){
    document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}
function backToTipos(){ show('tipos'); }
</script>
</body>
</html>